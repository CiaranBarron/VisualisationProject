<html>
    <head>
        <title> Ciaran Barron - Assignment</title>
        <script src="https://cdn.jsdelivr.net/npm/vega@5.9.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.2"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.2.1"></script>
        <style>
            body {
                font-family: sans-serif;
            }
					select {
						margin-left: 20px;
						border: 1px solid #000000;
						border-radius: 1px;
						overflow: hidden;
						padding: 3px 3px
					}
					
        </style>
    </head>
    <body>
        <table style="width: 850px;" cellspacing="5" cellpadding="5">
            <tbody>
                <tr>
                    <td style="width: 200px; vertical-align: top;"><strong>Name:&nbsp;</strong></td>
                    <td style="vertical-align: top;">Ciaran Barron</td>
                </tr>
                <tr>
                    <td style="vertical-align: top;"><strong>Student Number:</strong></td>
                    <td style="vertical-align: top;">14312451</td>
                </tr>
                <tr>
                    <td style="vertical-align: top;"><strong>Dataset description:</strong></td>
                    <td style="vertical-align: top;"> YOUR DATA SET DESCRIPTION HERE
                    </td>
                </tr>
                <tr>
                    <td style="vertical-align: top;"><strong>Initial questions</strong></td>
                    <td style="vertical-align: top;">YOUR INITIAL QUESTIONS HERE</td>
                </tr>
            </tbody>
        </table>
        <hr />
        <div id="vis"></div>
        <hr />
        <table style="width: 850px;" cellspacing="5" cellpadding="5">
            <tbody>
                <tr>
                    <td style="width: 200px; vertical-align: top;"><strong>Description:&nbsp;   </strong></td>
                    <td style="vertical-align: top;">YOUR GRAPH DESCRIPTION HERE</td>
                </tr>
                <tr>
                    <td style="vertical-align: top;"><strong>Insight:</strong></td>
                    <td style="vertical-align: top;">YOUR INSIGHT HERE</td>
                </tr>
                <tr>
                    <td style="vertical-align: top;"><strong>Design considerations</strong></td>
                    <td style="vertical-align: top;">YOUR DESIGN CONSIDERATIONS HERE</td>
                </tr>
                <tr>
                    <td style="width: 200px; vertical-align: top;"><strong>Data filtering and   transformation:&nbsp;</strong></td>
                    <td style="vertical-align: top;">YOUR DATA FILTERING AND TRANSFORMATION HERE</td>
                </tr>
            </tbody>
        </table>
    </body>
    
<!-- Vega-lite visualisation JS script -->
<script type="text/javascript">
var yourVlSpec =  
{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {
      "url": "https://raw.githubusercontent.com/CiaranBarron/VisualisationProject/master/V2Dataset.csv",
      "format": {"type": "csv"}
  },
  "title": {
      "text": "Growth of Kickstarter",
      "anchor": "middle",
      "fontSize": 24,
      "offset": 20
  },
  "width":800,
  "height":400,
  "layer":[{
    "selection": {
      "filter_by": {
        "type": "single",
        "fields": ["currency"],
        "bind": {
          "input": "select", 
          "options": [
            "USD", 
            "GBP",
            "EUR", 
            "CAD", 
            "CHF",
            "NOK", 
            "HKD", 
            "SGD", 
            "DKK"
          ]
        }
      }
    },
    "transform": [{
      "filter":{"selection":"filter_by", "field":"currency"}
    }],
    "mark":{"type":"bar", "tooltip":{"content":"encoding"}},
    "encoding": {
      "x": {
        "field": "deadline",
        "timeUnit":"yearmonth",
        "type": "temporal",
        "axis": {
          "title":"Date", 
          "format": "%m/%Y",
          "grid":false
        }
      },
      "y":{
        "aggregate":"sum",
        "field": "usd_pledged_real",
        "type": "quantitative",
        "scale":{"type":"log"},
        "axis": {
          "title":"Amount pledged ($)",
          "color":"blue",
          "grid": false
        }
      },
      "opacity": {
        "value": 0.8
      }
    }
  }, {
    "transform": [{
      "filter":{"selection":"filter_by", "field":"currency"}
    }, {
      "aggregate": [{"op": "sum", "field":"usd_pledged_real", "as": "daily_sum"}],
      "groupby": ["deadline"]
    }, {
      "sort": [{"field": "deadline"}],
      "window": [{"op": "sum", "field": "daily_sum", "as": "cumsum"}],
      "frame": [null, 0]
    }],
    "mark":{"type":"line", "interpolate": "step-after", "tooltip":{"content":"encoding"}},
    "encoding": {
      "x": { "field": "deadline", "type": "temporal"},
      "y": {
        "field":"cumsum", 
        "type":"quantitative",
        "axis": {
          "title":"Cumulative Pledged ($)",
          "grid": false
        }
      },
      "color":{"value":"red"}
    } 
  }
  ],
  "resolve": {
    "scale": { "y": "independent"},
    "legend": {"shared":true}
  },
  "config": {
    "legend": {
      "titleFontSize": 18,
      "labelFontSize": 15
    }
  }
}
vegaEmbed("#vis", yourVlSpec);
</script>
</html>